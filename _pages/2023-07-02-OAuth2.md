---
title: OAuth 2.0이란?
author: Nam Seonwoo
date: 2023-07-02
category: Jekyll
layout: post
published: true
---

이번 글에서는 OAuth 2.0이란 무엇인지를 소개하고 있다. 실제로 OAuth 2.0을 어떻게 구현하는지에 대해선 다음에 다루어보도록 하겠다. 참고로, 이후 구현에 있어서 OAuth 2.0은 Spring Security와 함께 구현할 예정이다. 이번에는 OAuth 2.0이란 무엇인지, OAuth 2.0의 등장 배경에 대해서 살펴볼 예정이다.

<br>

## 목차
1. [OAuth 2.0이란?](#1-oauth-20이란)
2. [OAuth 2.0의 등장 배경](#2-oauth-20-등장-배경)
3. [OAuth 2.0의 원리](#3-oauth-20-원리)
4. [결론](#4-결론)
5. [참고 자료](#5-참고-자료)

<br>

## 1. OAuth 2.0이란?

- OAuth = Open + Authorization
- The OAuth 2.0 Authorization Framework (RFC 6749)

OAuth는 Open과 Authorization의 합성어로 개방형 인가/권한 부여라는 의미를 가진다. OAuth 2.0 Authorization Framework, 즉 OAuth 2.0 인가 프레임ß워크는 애플리케이션이 사용자를 대신하여 사용자의 자원에 대한 액세스를 얻기 위해 승인 상호 작용을 함으로써 애플리케이션이 자체적으로 액세스 권한을 얻도록 한다. 이때 액세스 권한이란 사용자의 자원을 획득할 수 있는 권한을 의미한다. 즉, 사용자가 속한 사이트의 보호된 (사용자의) 자원에 대하여 애플리케이션의 접근을 허용하도록 승인하는 것을 말한다.

<br>

<img src="../../images/oauth2_230702_01.png" height="300" />

위의 그림에서는 애플리케이션 A의 예로 페이스북을, 애플리케이션 B의 예로는 구글을 들었다. 애플리케이션 A가 애플리케이션 B의 자원(여기서는 구글 계정)을 사용하기 위해서는 사용자를 통해 애플리케이션 B로부터 사용에 대한 권한을 부여받아야 한다. 이때 애플리케이션 A가 애플리케이션 B의 자원에 접근하기 위해 사용자로부터 권한을 얻어오는 작업을 OAuth 2.0 인가 프레임워크가 한다고 보면 된다.

<br>

이러한 OAuth 2.0 프레임워크를 위임 인가 프레임워크(Delegated Authorization Framework)라고도 한다. 왜냐하면 OAuth 2.0이 하는 역할이 바로 애플리케이션이 사용자의 데이터에 접근하도록 권한을 부여하는 일이기 때문이다.

<br>

## 2. OAuth 2.0 등장 배경

<img src="../../images/oauth2_230702_02.png" width="600" />

OAuth 2.0 방식은 위와 같이 사용자가 웹 애플리케이션에 페이스북과 관련된 자원에 대한 요청(예: 페이스북 계정, 페이스북 사진 불러오기 등)을 하면, OAuth 2.0을 통해 그 접근 권한을 Resource Server인 페이스북으로부터 받아오는 것을 의미한다.

<br>

<img src="../../images/oauth2_230702_03.png" width="600" />

그에 반해 OAuth 2.0 이전 방식의 경우 사용자가 페이스북에 대한 접근 권한을 얻기 위해 웹 애플리케이션(Client, 클라이언트)에게 페이스북의 아이디와 비밀번호를 입력한다. 하지만 이 경우 아래와 같은 문제점들이 발생할 수 있다.

- 그림에서처럼 아이디와 비밀번호가 노출되기 때문에 보안에 취약하다.
- 클라이언트가 페이스북의 모든 서비스를 제한없이 사용 가능하다.
- 클라이언트를 신뢰할 수 있는지에 대한 문제도 존재한다.

사용자의 입장에서는 위와 같은 방식으로 접근 권한을 얻어올 경우 자신의 계정 및 정보에 대한 탈취 염려가 있어 불안할 수밖에 없다. 그렇다면 이러한 문제를 해결할 수 있는 OAuth 2.0의 원리에 대해 더 자세히 살펴보자.

<br>

## 3. OAuth 2.0 원리

<img src="../../images/oauth2_230702_04.png" width="600" />

사용자와 웹 애플리케이션(Client, 클라이언트)이 있을 때 사용자가 웹 애플리케이션에서 페이스북의 특정 자원에 접근하는 요청을 보냈다고 가정하자. 이를 위해서는 페이스북, 즉 서비스 제공자는 웹 애플리케이션에게 해당 페이스북의 (사용자와 관련된) 데이터를 전달해도 된다는 승인을 받아야 한다. 사용자로부터 승인을 받은 후에만 웹 애플리케이션에게 페이스북과 관련된 자원에 접근을 할 수 있게 된다.

이때 페이스북 로그인을 할 수 있도록 웹 애플리케이션이 사용자에게 로그인 페이지로 안내한다. 사용자는 로그인 페이지에서 인증을 받게 되며, 이 과정에서 사용자가 페이스북에 속한 사용자인지를 인증하게 된다.

인증을 받은 후에는 웹 애플리케이션이 사용자의 모든 데이터를 사용하게 할 수는 없으므로 웹 애플리케이션에게 허락할 제한된 범위 내의 동의 및 권한 범위를 선택하도록 한다.

이러한 과정이 전부 다 완료된 후에야 페이스북이 웹 애플리케이션에게 사용자의 데이터를 사용해도 된다는 권한을 부여하게 되고, 이때 Access Token이 발급된다.

Access Token을 가지고 웹 애플리케이션은 (동의된 범위 내에서) 사용자가 속한 데이터를 가지고 올 수 있는 권한을 갖게 된다. 이러한 방식이 바로 OAuth 2.0 방식이다. OAuth 2.0 방식이 갖는 장점은 아래와 같다.

- 페이스북의 아이디와 비밀번호로 로그인을 할 필요가 없다.
- 페이스북의 서비스를 범위에 따라 제한할 수 있다.
- 클라이언트 애플리케이션의 신뢰 여부를 판단할 필요가 없다.

<br>

## 4. 결론

사실 나에게 있어서 제일 어렵고 진입 장벽이 높은 부분이 바로 보안 부분이다. 개인 정보에 대한 중요성이 부각되고 있는 요즘, 개발자로서 내가 어떻게 해야 우리의 서비스를 이용하는 사용자의 정보를 안전히 보호할 수 있을까?에 대한 걱정과 고민은 항상 지녀야 한다고 생각한다. 이러한 인가/인증에 대한 공부를 제대로 해보는 것은 이번이 처음인데, 이번을 계기로 사용자 정보 보호에 대한 이해를 더욱 더 높여가고 싶은 마음이다.

<br>

## 5. 참고 자료

- [Hudi, 「OAuth 2.0 개념과 동작원리」, hudi.blog, 2022. 07. 15.](https://hudi.blog/oauth-2.0/)
- [정수원, 「스프링 시큐리티 OAuth2 - Spring Boot 기반으로 개발하는 Spring Security OAuth2」, Inflearn, 2022. 10. 17.](https://www.inflearn.com/course/%EC%A0%95%EC%88%98%EC%9B%90-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0#reviews)

<br>
